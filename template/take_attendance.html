<h2>Take Attendance</h2>

<form method="GET">
    <label>Select Class:</label>
    <select name="class" onchange="this.form.submit()">
        <option value="">--Select--</option>
        {% for cls in classes %}
            <option value="{{ cls.class_name }}" {% if selected_class == cls.class_name %}selected{% endif %}>
                {{ cls.class_name }}
            </option>
        {% endfor %}
    </select>
</form>

{% if students %}
<form method="POST">
    {% csrf_token %}
    <input type="hidden" name="class_name" value="{{ selected_class }}">
    <table border="1" cellpadding="5">
        <tr>
            <th>Student Name</th>
            <th>Status</th>
        </tr>
        {% for student in students %}
        <tr>
            <td>{{ student.full_name }}</td>
            <td>
                <select name="status_{{ student.id }}">
                    <option value="Present">Present</option>
                    <option value="Absent">Absent</option>
                </select>
            </td>
        </tr>
        {% endfor %}
    </table>
    <button type="submit">Submit Attendance</button>
</form>
{% endif %}
<a href="{% url 'teacher_dashboard' %}">Home</a>